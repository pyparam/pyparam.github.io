<!DOCTYPE html>
<html>
	<link href ='style.css' rel = 'stylesheet'>
	<head>
		<title>Pyparam</title>
	
	</head>
	<body>
		<nav>
    		<ul class='nav'>
        		<li ><a href="/">Home</a></li>
        		<li><a href="/cv">CV</a></li>
        		<li><a href="/blog">Blog</a></li>
			<li><a href="/codes">Codes</a></li>
			<li><a href="/usefullinks">Useful Links</a></li>
        	</ul>
		</nav>
<h1>Applying Periodic boundary conditions in 2D rectangle shape RVE in Abaqus/CAE using Python</h1><br>
		<br>
		<p>This python script can be run using any version of abaqus </p>
		<p> The displayed python script can be use to apply periodic boundary conditions in 2D Recatangle <br>
		 Representative Volume Element (RVE) of any size. One has to provide certain inputs,<br> 
		1. model name of the RVE and 2. height and 3. width of RVE, <br>
		In order to use this script to your FEA model, you need to change the <em>modelkey</em> variable name to 
			a name of your model. 
			
		
<!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:scroll;width:800px;height:1000px;border:solid green;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><table><tr><td><pre style="margin: 0; line-height: 125%"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88</pre></td><td><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-style: italic"># Applying Periodic Boundary Conditions in Abaqus/CAE</span>
<span style="color: #008800; font-style: italic"># Created by: Paramveer Sharma</span>
<span style="color: #008800; font-style: italic"># MS, Aerospace Engineering</span>
<span style="color: #008800; font-style: italic"># Indian Institute of Technology Madras</span>
<span style="color: #008800; font-style: italic"># PBC Constraints is generalised for any size of rve </span>
<span style="color: #008800; font-style: italic"># You can change the model name : Model-1 to whatever the name of your model and same apply for Instance, 	</span>
<span style="color: #008800; font-style: italic">#########################################</span>
modelkey <span style="color: #666666">=</span><span style="color: #BB4444">&#39;Model-Name&#39;</span>
instancekey <span style="color: #666666">=</span> mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>rootAssembly<span style="color: #666666">.</span>instances<span style="color: #666666">.</span>keys()[<span style="color: #666666">0</span>]
F<span style="color: #666666">=</span>mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>rootAssembly<span style="color: #666666">.</span>instances[instancekey]<span style="color: #666666">.</span>nodes
cornsetlist,setlabel<span style="color: #666666">=</span>[<span style="color: #BB4444">&#39;Bottemleft&#39;</span>,<span style="color: #BB4444">&#39;Bottemright&#39;</span>,<span style="color: #BB4444">&#39;Topright&#39;</span>,<span style="color: #BB4444">&#39;Topleft&#39;</span>],[<span style="color: #BB4444">&#39;setlabelH&#39;</span>,<span style="color: #BB4444">&#39;consH&#39;</span>,<span style="color: #BB4444">&#39;setlabelV&#39;</span>,<span style="color: #BB4444">&#39;consV&#39;</span>,<span style="color: #BB4444">&#39;corn&#39;</span>,<span style="color: #BB4444">&#39;U&#39;</span>,<span style="color: #BB4444">&#39;V&#39;</span>]
a,noj  <span style="color: #666666">=</span> getInput(<span style="color: #BB4444">&#39;length of RVE (x - coordinates)&#39;</span>),<span style="color: #666666">0</span>
b <span style="color: #666666">=</span> getInput(<span style="color: #BB4444">&#39;height of RVE (y - coordinates)&#39;</span>)
a<span style="color: #666666">=</span> <span style="color: #AA22FF">float</span>(a)
b <span style="color: #666666">=</span> <span style="color: #AA22FF">float</span>(b)
<span style="color: #AA22FF; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #AA22FF">range</span>(<span style="color: #AA22FF">len</span>(F)):
  coor<span style="color: #666666">=</span>F[i]<span style="color: #666666">.</span>coordinates
  column <span style="color: #666666">=</span> [<span style="color: #666666">0</span>,a,b]
  <span style="color: #AA22FF; font-weight: bold">for</span> k <span style="color: #AA22FF; font-weight: bold">in</span> column:
	<span style="color: #AA22FF; font-weight: bold">if</span> coor[<span style="color: #666666">0</span>]<span style="color: #666666">==</span>k:
		<span style="color: #AA22FF; font-weight: bold">for</span> m <span style="color: #AA22FF; font-weight: bold">in</span> column:
			<span style="color: #AA22FF; font-weight: bold">if</span> coor[<span style="color: #666666">1</span>]<span style="color: #666666">==</span>m:
			   <span style="color: #008800; font-style: italic">#print(str(F[i].coordinates))</span>
			   cornseti<span style="color: #666666">=</span>setlabel[<span style="color: #666666">4</span>]<span style="color: #666666">+</span><span style="color: #AA22FF">str</span>(F[i]<span style="color: #666666">.</span>label)
			   setsi<span style="color: #666666">=</span>mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>rootAssembly<span style="color: #666666">.</span>Set(cornseti, F[i:i<span style="color: #666666">+1</span>])
			   <span style="color: #AA22FF; font-weight: bold">if</span> coor[<span style="color: #666666">0</span>]<span style="color: #666666">==0.0</span> <span style="color: #AA22FF; font-weight: bold">and</span> coor[<span style="color: #666666">1</span>]<span style="color: #666666">==0.0</span>:
					cornsetlist[<span style="color: #666666">0</span>]<span style="color: #666666">=</span>cornseti
			   <span style="color: #AA22FF; font-weight: bold">elif</span> coor[<span style="color: #666666">0</span>]<span style="color: #666666">==</span>a <span style="color: #AA22FF; font-weight: bold">and</span> coor[<span style="color: #666666">1</span>]<span style="color: #666666">==0.0</span>:
					cornsetlist[<span style="color: #666666">1</span>]<span style="color: #666666">=</span>cornseti
			   <span style="color: #AA22FF; font-weight: bold">elif</span> coor[<span style="color: #666666">0</span>]<span style="color: #666666">==</span>a <span style="color: #AA22FF; font-weight: bold">and</span> coor[<span style="color: #666666">1</span>]<span style="color: #666666">==</span>b:
					cornsetlist[<span style="color: #666666">2</span>]<span style="color: #666666">=</span>cornseti
			   <span style="color: #AA22FF; font-weight: bold">elif</span> coor[<span style="color: #666666">0</span>]<span style="color: #666666">==0.0</span> <span style="color: #AA22FF; font-weight: bold">and</span> coor[<span style="color: #666666">1</span>]<span style="color: #666666">==</span>b:
					cornsetlist[<span style="color: #666666">3</span>]<span style="color: #666666">=</span>cornseti
<span style="color: #AA22FF; font-weight: bold">if</span> noj<span style="color: #666666">==0</span>:
   mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>Equation(<span style="color: #BB4444">&#39;corneq1&#39;</span>,([<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">2</span>],<span style="color: #666666">1</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">1</span>],<span style="color: #666666">1</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">3</span>],<span style="color: #666666">1</span>],[<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">0</span>],<span style="color: #666666">1</span>]))
   mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>Equation(<span style="color: #BB4444">&#39;corneq2&#39;</span>,([<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">3</span>],<span style="color: #666666">2</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">0</span>],<span style="color: #666666">2</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">2</span>],<span style="color: #666666">2</span>],[<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">1</span>],<span style="color: #666666">2</span>]))
<span style="color: #AA22FF; font-weight: bold">if</span> noj<span style="color: #666666">==1</span>:
   mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>Equation(<span style="color: #BB4444">&#39;corneq1&#39;</span>,([<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">1</span>],<span style="color: #666666">1</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">2</span>],<span style="color: #666666">1</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">3</span>],<span style="color: #666666">1</span>],[<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">0</span>],<span style="color: #666666">1</span>]))
   mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>Equation(<span style="color: #BB4444">&#39;corneq2&#39;</span>,([<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">2</span>],<span style="color: #666666">2</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">1</span>],<span style="color: #666666">2</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">3</span>],<span style="color: #666666">2</span>],[<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">0</span>],<span style="color: #666666">2</span>]))
<span style="color: #AA22FF; font-weight: bold">if</span> noj<span style="color: #666666">==2</span>:
  mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>Equation(<span style="color: #BB4444">&#39;corneq1&#39;</span>,([<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">2</span>],<span style="color: #666666">1</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">1</span>],<span style="color: #666666">1</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">3</span>],<span style="color: #666666">1</span>],[<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">0</span>],<span style="color: #666666">1</span>]))
  mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>Equation(<span style="color: #BB4444">&#39;corneq2&#39;</span>,([<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">2</span>],<span style="color: #666666">2</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">1</span>],<span style="color: #666666">2</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">3</span>],<span style="color: #666666">2</span>],[<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">0</span>],<span style="color: #666666">2</span>]))
column <span style="color: #666666">=</span> [<span style="color: #666666">0</span>,a,b]
l1,l2,l3,l4<span style="color: #666666">=</span>[],[],[],[] <span style="color: #008800; font-style: italic">###l1,l2,l3,l4 is list of node index position which situated at Bottem, Top, Right and Left respectively.</span>
<span style="color: #AA22FF; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #AA22FF">range</span>(<span style="color: #AA22FF">len</span>(F)):
	coor<span style="color: #666666">=</span>F[i]<span style="color: #666666">.</span>coordinates
	<span style="color: #AA22FF; font-weight: bold">if</span> coor[<span style="color: #666666">1</span>]<span style="color: #666666">==0</span>:
		<span style="color: #AA22FF; font-weight: bold">if</span> coor[<span style="color: #666666">0</span>]<span style="color: #666666">!=0</span> <span style="color: #AA22FF; font-weight: bold">and</span> coor[<span style="color: #666666">0</span>]<span style="color: #666666">!=</span>a:
			l2<span style="color: #666666">.</span>append(i);
	<span style="color: #AA22FF; font-weight: bold">if</span> coor[<span style="color: #666666">1</span>]<span style="color: #666666">==</span>b:
		<span style="color: #AA22FF; font-weight: bold">if</span> coor[<span style="color: #666666">0</span>]<span style="color: #666666">!=0</span> <span style="color: #AA22FF; font-weight: bold">and</span> coor[<span style="color: #666666">0</span>]<span style="color: #666666">!=</span>a:
			l1<span style="color: #666666">.</span>append(i);
	<span style="color: #AA22FF; font-weight: bold">if</span> coor[<span style="color: #666666">0</span>]<span style="color: #666666">==0</span>:
		<span style="color: #AA22FF; font-weight: bold">if</span> coor[<span style="color: #666666">1</span>]<span style="color: #666666">!=0</span> <span style="color: #AA22FF; font-weight: bold">and</span> coor[<span style="color: #666666">1</span>]<span style="color: #666666">!=</span>b:
			l4<span style="color: #666666">.</span>append(i);
	<span style="color: #AA22FF; font-weight: bold">if</span> coor[<span style="color: #666666">0</span>]<span style="color: #666666">==</span>a:
		<span style="color: #AA22FF; font-weight: bold">if</span> coor[<span style="color: #666666">1</span>]<span style="color: #666666">!=0</span> <span style="color: #AA22FF; font-weight: bold">and</span> coor[<span style="color: #666666">1</span>]<span style="color: #666666">!=</span>b:
			l3<span style="color: #666666">.</span>append(i);

<span style="color: #AA22FF; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #AA22FF">range</span>(<span style="color: #AA22FF">len</span>(l1)):
	coor1<span style="color: #666666">=</span>F[l1[i]]<span style="color: #666666">.</span>coordinates
	<span style="color: #AA22FF; font-weight: bold">for</span> j <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #AA22FF">range</span>(<span style="color: #AA22FF">len</span>(l2)):
		coor2<span style="color: #666666">=</span>F[l2[j]]<span style="color: #666666">.</span>coordinates
		<span style="color: #AA22FF; font-weight: bold">if</span> coor1[<span style="color: #666666">0</span>] <span style="color: #666666">==</span> coor2[<span style="color: #666666">0</span>]:
			setlabeli<span style="color: #666666">=</span>setlabel[<span style="color: #666666">0</span>]<span style="color: #666666">+</span><span style="color: #AA22FF">str</span>(F[l1[i]]<span style="color: #666666">.</span>label)
			setlabelj<span style="color: #666666">=</span>setlabel[<span style="color: #666666">0</span>]<span style="color: #666666">+</span><span style="color: #AA22FF">str</span>(F[l2[j]]<span style="color: #666666">.</span>label)
			cequation1<span style="color: #666666">=</span>setlabel[<span style="color: #666666">1</span>]<span style="color: #666666">+</span><span style="color: #AA22FF">str</span>(F[l1[i]]<span style="color: #666666">.</span>label)<span style="color: #666666">+</span>setlabel[<span style="color: #666666">5</span>]<span style="color: #666666">+</span><span style="color: #AA22FF">str</span>(F[l2[j]]<span style="color: #666666">.</span>label)
			cequation2<span style="color: #666666">=</span>setlabel[<span style="color: #666666">1</span>]<span style="color: #666666">+</span><span style="color: #AA22FF">str</span>(F[l1[i]]<span style="color: #666666">.</span>label)<span style="color: #666666">+</span>setlabel[<span style="color: #666666">6</span>]<span style="color: #666666">+</span><span style="color: #AA22FF">str</span>(F[l2[j]]<span style="color: #666666">.</span>label)
			setsi<span style="color: #666666">=</span>mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>rootAssembly<span style="color: #666666">.</span>Set(setlabeli, F[l1[i]:l1[i]<span style="color: #666666">+1</span>])
			setsj<span style="color: #666666">=</span>mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>rootAssembly<span style="color: #666666">.</span>Set(setlabelj, F[l2[j]:l2[j]<span style="color: #666666">+1</span>])
			mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>Equation(cequation1,([<span style="color: #666666">1</span>,setlabeli,<span style="color: #666666">1</span>],[<span style="color: #666666">-1</span>,setlabelj,<span style="color: #666666">1</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">3</span>],<span style="color: #666666">1</span>],[<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">0</span>],<span style="color: #666666">1</span>]))
			mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>Equation(cequation2,([<span style="color: #666666">1</span>,setlabeli,<span style="color: #666666">2</span>],[<span style="color: #666666">-1</span>,setlabelj,<span style="color: #666666">2</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">3</span>],<span style="color: #666666">2</span>],[<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">0</span>],<span style="color: #666666">2</span>]))				
<span style="color: #AA22FF; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #AA22FF">range</span>(<span style="color: #AA22FF">len</span>(l3)):
	coor1<span style="color: #666666">=</span>F[l3[i]]<span style="color: #666666">.</span>coordinates
	<span style="color: #AA22FF; font-weight: bold">for</span> j <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #AA22FF">range</span>(<span style="color: #AA22FF">len</span>(l4)):
		coor2<span style="color: #666666">=</span>F[l4[j]]<span style="color: #666666">.</span>coordinates
		<span style="color: #AA22FF; font-weight: bold">if</span> coor1[<span style="color: #666666">1</span>] <span style="color: #666666">==</span> coor2[<span style="color: #666666">1</span>]:
			setlabeli<span style="color: #666666">=</span>setlabel[<span style="color: #666666">2</span>]<span style="color: #666666">+</span><span style="color: #AA22FF">str</span>(F[l3[i]]<span style="color: #666666">.</span>label)
			setlabelj<span style="color: #666666">=</span>setlabel[<span style="color: #666666">2</span>]<span style="color: #666666">+</span><span style="color: #AA22FF">str</span>(F[l4[j]]<span style="color: #666666">.</span>label)
			cequation1<span style="color: #666666">=</span>setlabel[<span style="color: #666666">3</span>]<span style="color: #666666">+</span><span style="color: #AA22FF">str</span>(F[l3[i]]<span style="color: #666666">.</span>label)<span style="color: #666666">+</span>setlabel[<span style="color: #666666">5</span>]<span style="color: #666666">+</span><span style="color: #AA22FF">str</span>(F[l4[j]]<span style="color: #666666">.</span>label)
			cequation2<span style="color: #666666">=</span>setlabel[<span style="color: #666666">3</span>]<span style="color: #666666">+</span><span style="color: #AA22FF">str</span>(F[l3[i]]<span style="color: #666666">.</span>label)<span style="color: #666666">+</span>setlabel[<span style="color: #666666">6</span>]<span style="color: #666666">+</span><span style="color: #AA22FF">str</span>(F[l4[j]]<span style="color: #666666">.</span>label)
			setsi<span style="color: #666666">=</span>mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>rootAssembly<span style="color: #666666">.</span>Set(setlabeli, F[l3[i]:l3[i]<span style="color: #666666">+1</span>])
			setsj<span style="color: #666666">=</span>mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>rootAssembly<span style="color: #666666">.</span>Set(setlabelj, F[l4[j]:l4[j]<span style="color: #666666">+1</span>])
			mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>Equation(cequation1,([<span style="color: #666666">1</span>,setlabeli,<span style="color: #666666">1</span>],[<span style="color: #666666">-1</span>,setlabelj,<span style="color: #666666">1</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">1</span>],<span style="color: #666666">1</span>],[<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">0</span>],<span style="color: #666666">1</span>]))
			mdb<span style="color: #666666">.</span>models[modelkey]<span style="color: #666666">.</span>Equation(cequation2,([<span style="color: #666666">1</span>,setlabeli,<span style="color: #666666">2</span>],[<span style="color: #666666">-1</span>,setlabelj,<span style="color: #666666">2</span>],[<span style="color: #666666">-1</span>,cornsetlist[<span style="color: #666666">1</span>],<span style="color: #666666">2</span>],[<span style="color: #666666">1</span>,cornsetlist[<span style="color: #666666">0</span>],<span style="color: #666666">2</span>]))
<span style="color: #008800; font-style: italic">####################################################################</span>
<span style="color: #008800; font-style: italic">#PBC Constraints end</span>
<span style="color: #008800; font-style: italic">###################################################################</span>
</pre></td></tr></table></div>




